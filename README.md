# Dropbox SDK for Rust

Rust bindings to the Dropbox APIv2, generated by Stone from the official spec.

To build:
```
git submodule init
git submodule update
./generate.sh dropbox-api-spec
cargo build
```

To actually use the API calls, you need a HTTP client -- all functions take a `&HttpClient` as their first argument.
This trait is located at `dropbox_sdk::client_trait::HttpClient`. Implement this trait and pass it as the client argument.

If you don't want to implement your own, this SDK comes with an optional default client that uses Hyper and your system's native TLS library.
To use it, build with the `hyper_client` feature flag, and then there will be a `dropbox_sdk::hyper_client::HyperClient` type that you can use.
The default Hyper client needs a Dropbox API token; how you get one is up to you and your program.

Some implementation notes and limitations:
 * Stone allows structures to inherit from other structures and be polymorphic.
    Rust doesn't have these paradigms, so instead this SDK represents polymorphic parent structs as enums, and the inherited fields are put in all variants.
    See `dropbox_sdk::files::Metadata` for an example.
 * This code does not use `serde_derive` and instead uses manually-emitted serialization code.
    Previous work did attempt to use `serde_derive`, but the way the Dropbox API serializes unions containing structs (by collapsing their fields into the union) isn't supported by `serde_derive`.
    It also took an extremely long time to compile (~30 minutes for release build) and huge (~190MB) .rlib files.
    The hand-written code is more versatile, compiles faster, and produces a smaller binary, at the expense of making the generated code much larger.

Happy Dropboxing!

